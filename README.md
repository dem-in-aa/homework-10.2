# Домашнее задание к занятию 10.2 «Кластеризация» Андрей Дёмин

---

### Задание 1

В чём различие между SMP- и MPP-системами?

*Приведите ответ в свободной форме.*

SMP (symmetric multiprocessing) – симметричная многопроцессорная архитектура. Главной особенностью систем с архитектурой SMP является наличие общей физической памяти, разделяемой всеми процессорами. Память служит, в частности, для передачи сообщений между процессорами, при этом все вычислительные устройства при обращении к ней имеют равные права и одну и ту же адресацию для всех ячеек памяти. Поэтому SMP-архитектура называется симметричной.
Системы с общей памятью плохо масштабируются. Этот существенный недостаток SMP-систем не позволяет считать их по-настоящему перспективными. Причиной плохой масштабируемости является то, что в данный момент шина способна обрабатывать только одну транзакцию, вследствие чего возникают проблемы разрешения конфликтов при одновременном обращении нескольких процессоров к одним и тем же областям общей физической памяти. Вычислительные элементы начинают друг другу мешать. Когда произойдет такой конфликт, зависит от скорости связи и от количества вычислительных элементов. В настоящее время конфликты могут происходить при наличии 8-24 процессоров. Кроме того, системная шина имеет ограниченную (хоть и высокую) пропускную способность (ПС) и ограниченное число слотов. Все это очевидно препятствует увеличению производительности при увеличении числа процессоров и числа подключаемых пользователей. В реальных системах можно задействовать не более 32 процессоров.

MPP (massive parallel processing) – массивно-параллельная архитектура. Главная особенность такой архитектуры состоит в том, что память физически разделена. В этом случае система строится из отдельных модулей, содержащих процессор, локальный банк операционной памяти (ОП), коммуникационные процессоры (рутеры) или сетевые адаптеры, иногда – жесткие диски и/или другие устройства ввода/вывода. По сути, такие модули представляют собой полнофункциональные компьютеры. Доступ к банку ОП из данного модуля имеют только процессоры (ЦП) из этого же модуля. Модули соединяются специальными коммуникационными каналами. Пользователь может определить логический номер процессора, к которому он подключен, и организовать обмен сообщениями с другими процессорами. Используются два варианта работы операционной системы (ОС) на машинах MPP-архитектуры. В одном полноценная операционная система (ОС) работает только на управляющей машине (front-end), на каждом отдельном модуле функционирует сильно урезанный вариант ОС, обеспечивающий работу только расположенной в нем ветви параллельного приложения. Во втором варианте на каждом модуле работает полноценная UNIX-подобная ОС, устанавливаемая отдельно.
Главным преимуществом систем с раздельной памятью является хорошая масштабируемость: в отличие от SMP-систем, в машинах с раздельной памятью каждый процессор имеет доступ только к своей локальной памяти, в связи с чем не возникает необходимости в потактовой синхронизации процессоров. Практически все рекорды по производительности на сегодня устанавливаются на машинах именно такой архитектуры, состоящих из нескольких тысяч процессоров.

Недостатки:

отсутствие общей памяти заметно снижает скорость межпроцессорного обмена, поскольку нет общей среды для хранения данных, предназначенных для обмена между процессорами. Требуется специальная техника программирования для реализации обмена сообщениями между процессорами;

каждый процессор может использовать только ограниченный объем локального банка памяти;

вследствие указанных архитектурных недостатков требуются значительные усилия для того, чтобы максимально использовать системные ресурсы. Именно этим определяется высокая цена программного обеспечения для массивно-параллельных систем с раздельной памятью.

---

### Задание 2

В чём отличие сильно связанных и слабо связанных систем?

*Приведите ответ в свободной форме.*

Основное различие между слабо связанной и сильно связанной многопроцессорной системой состоит в том, что слабосвязанная система имеет распределенную память, тогда как сильносвязанная система имеет общую память. 

---

### Задание 3

Какие преимущества отличают кластерные системы от обычных серверов?

*Приведите ответ в свободной форме.*

Кластерные системы отличаются следующими достоинствами:

• Большая надежность. При отказе компьютера, входящего в кластер, используются ресурсы прочих серверов из того же кластера.
• Высокая масштабируемость. В случае если нагрузка на кластер возрастет, в него просто добавляют еще один сервер.
• Возможность перераспределения ресурсов серверов. 

---

### Задание 4

Приведите примеры типов современных кластерных систем.

*Приведите ответ в свободной форме.*

Отказоустойчивые кластеры (High-availability clusters):
- Active/active - одна из самых популярных схем реализации отказоустойчивого кластер. Если один из серверов в кластере, построенном по схеме active/active, окажется недоступным, его трафик перераспределится между оставшимися узлами. Этот способ актуален в ситуациях, когда узлы кластера однородны с точки зрения аппаратного и программного обеспечения и выполняют одинаковые задачи.

- Active/passive - резервируется каждый узел в кластере. Резервный узел включается только при отказе основного. Несложно догадаться, что схема active/passive требует значительной избыточности.

- N+1 - в кластере есть один резервный узел, который берет на себя задачи вышедшего из строя сервера. После восстановления способности оборудования узел опять становится резервным. Схема N+1 может быть реализована в кластере с неоднородными задачами, при этом "запасной" узел должен будет суметь заменить любую машину из этого кластера.

- N+M - если одного резервного сервера недостаточно из-за разнородности сервисов и задач, которые обслуживают серверы в кластере, можно использовать схему N+M. В отличие от предыдущей она подразумевает, что в кластере будет не одна, а сразу несколько резервных машин. Такой способ построения отказоустойчивого кластера позволяет достичь компромисса между стоимостью решения и требуемым уровнем надежности.

Кластеры с балансировкой нагрузки (Load balancing clusters):
- вычислительные кластеры (High performance computing clusters);
- системы распределенных вычислений.

---

### Задание 5

Где используют сервис Kafka, rabitMQ?

*Приведите ответ в свободной форме.*

---

## Задания со звёздочкой*
Эти задания дополнительные. Их можно не выполнять. На зачёт это не повлияет. Вы можете их выполнить, если хотите глубже разобраться в материале.

---

### Задание 6*

Исследуйте построение кластера на основе rabbitMQ: https://github.com/ypereirareis/docker-rabbitmq-ha-cluster. 
Используя docker-compose, соберите инфраструктуру. Исследуйте её работы.

Ответьте на вопросы.

- На каких компонетах развёрнут кластер?
- Назначение компонентов кластера.
- Какие тесты можно провести для анализа работы кластера?

*Приведите в пример скриншоты работающей системы и ответы на вопросы.*

